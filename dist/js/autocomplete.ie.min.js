/*!
* @name autocomplete
* @version 1.8.6
* @author Grzegorz Tomicki
* @link https://github.com/tomickigrzegorz/autocomplete
* @license MIT
*/
var Autocomplete=function(){"use strict";var t=function(t,e){for(var i in e)"addClass"===i?s(t,"add",e[i]):"removeClass"===i?s(t,"remove",e[i]):t.setAttribute(i,e[i])},e=function(t){return(t.firstElementChild||t).textContent.trim()},i=function(t,e){t.scrollTop=t.offsetTop-e.offsetHeight},n=function(t,e){void 0===t&&(t=!1),t&&(s(t,"remove","hidden"),u(t,"click",e))},s=function(t,e,i){return t.classList[e](i)},o=function(e,i){t(e,{"aria-activedescendant":i||""})},a=function(t,e,i,n){var s=n.previousSibling,o=s?s.offsetHeight:0;if("0"==t.getAttribute("aria-posinset")&&(n.scrollTop=t.offsetTop-function(t,e){var i=document.querySelectorAll("#"+t+" > li:not(."+e+")"),n=0;return[].slice.call(i).map((function(t){return n+=t.offsetHeight})),n}(e,i)),t.offsetTop-o<n.scrollTop)n.scrollTop=t.offsetTop-o;else{var a=t.offsetTop+t.offsetHeight-o;a>n.scrollTop+n.offsetHeight&&(n.scrollTop=a-n.offsetHeight)}},r=function(t){return document.createElement(t)},c=function(t){return document.querySelector(t)},u=function(t,e,i){t.addEventListener(e,i)},d=function(t,e,i){t.removeEventListener(e,i)},l=27,h=13,f=38,v=40,m=9;return function(p,b){var x,k=this,y=b.delay,C=void 0===y?500:y,j=b.clearButton,w=void 0===j||j,V=b.clearButtonOnInitial,g=void 0!==V&&V,A=b.howManyCharacters,O=void 0===A?1:A,I=b.selectFirst,J=void 0!==I&&I,N=b.insertToInput,S=void 0!==N&&N,T=b.showAllValues,$=void 0!==T&&T,q=b.cache,z=void 0!==q&&q,B=b.disableCloseOnSelect,G=void 0!==B&&B,P=b.classGroup,D=b.classPreventClosing,E=b.classPrefix,F=b.ariaLabelClear,H=b.onSearch,K=b.onResults,L=void 0===K?function(){}:K,M=b.onSubmit,Q=void 0===M?function(){}:M,R=b.onOpened,U=void 0===R?function(){}:R,W=b.onReset,X=void 0===W?function(){}:W,Y=b.onRender,Z=void 0===Y?function(){}:Y,_=b.onClose,tt=void 0===_?function(){}:_,et=b.noResults,it=void 0===et?function(){}:et,nt=b.onSelectedItem,st=void 0===nt?function(){}:nt;this.t=function(){var e,i,s,o,a;k.i(),e=k.o,i=k.u,s=k.l,o=k.h,a=k.v,t(i,{id:s,tabIndex:"0",role:"listbox"}),t(o,{addClass:a+"-results-wrapper"}),o.insertAdjacentElement("beforeend",i),e.parentNode.insertBefore(o,e.nextSibling),u(k.o,"input",k.m),k.p&&u(k.o,"click",k.m),k.k({element:k.o,results:k.u}),k.C&&n(k.j,k.destroy)},this.V=function(t,e){k.g&&("update"===t?k.o.setAttribute(k.A,e.value):"remove"===t?k.o.removeAttribute(k.A):k.o.value=k.o.getAttribute(k.A))},this.m=function(t){var e=t.target,i=t.type;if("true"!==k.o.getAttribute("aria-expanded")||"click"!==i){var n=e.value.replace(k.O,"\\$&");k.V("update",e);var s=k.p?0:k.I;clearTimeout(k.J),k.J=setTimeout((function(){k.N(n.trim())}),s)}},this.S=function(){var e;t(k.o,{"aria-owns":k.T+"-list","aria-expanded":"false","aria-autocomplete":"list","aria-activedescendant":"",role:"combobox",removeClass:"auto-expanded"}),s(k.h,"remove",k.$),k.q(c("."+k.B)),(0==(null==(e=k.G)?void 0:e.length)&&!k.P||k.p)&&(k.u.textContent=""),k.D=k.F?0:-1,k.H()},this.N=function(t){k.K=t,k.L(!0),n(k.j,k.destroy),0==t.length&&k.M&&s(k.j,"add","hidden"),k.R>t.length&&!k.p?k.L():k.U({currentValue:t,element:k.o}).then((function(e){var i=k.o.value.length,n=e.length;k.G=Array.isArray(e)?e:JSON.parse(JSON.stringify(e)),k.L(),k.W(),0==n&&0==i&&s(k.j,"add","hidden"),0==n&&i?(s(k.o,"remove","auto-expanded"),k.S(),k.X({element:k.o,currentValue:t,template:k.Y}),k.Z()):(n>0||function(t){return t&&"object"==typeof t&&t.constructor===Object}(e))&&(k.D=k.F?0:-1,k.Y(),k.Z())})).catch((function(){k.L(),k.S()}))},this.L=function(t){return k.o.parentNode.classList[t?"add":"remove"](k._)},this.W=function(){return s(k.o,"remove",k.tt)},this.Z=function(){u(k.o,"keydown",k.et),u(k.o,"click",k.it),u(document,"click",k.nt),["mousemove","click"].map((function(t){u(k.u,t,k.st)}))},this.Y=function(e){t(k.o,{"aria-expanded":"true",addClass:k.v+"-expanded"}),k.u.textContent="";var n=0===k.G.length?k.ot({currentValue:k.K,matches:0,template:e}):k.ot({currentValue:k.K,matches:k.G,classGroup:k.rt});k.u.insertAdjacentHTML("afterbegin",n),s(k.h,"add",k.$);var o=k.rt?":not(."+k.rt+")":"";k.ct=document.querySelectorAll("#"+k.l+" > li"+o),function(e){for(var i=0;i<e.length;i++)t(e[i],{role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":e.length,"aria-posinset":i})}(k.ct),k.ut({type:"results",element:k.o,results:k.u}),k.dt(),i(k.u,k.h)},this.nt=function(t){var e=t.target,i=null;(e.closest("ul")&&k.lt||e.closest("."+k.ht))&&(i=!0),e.id===k.T||i||k.S()},this.dt=function(){if(k.q(c("."+k.B)),k.F){var e=k.u.firstElementChild,i=k.rt&&k.G.length>0&&k.F?e.nextElementSibling:e;k.ft({index:k.D,element:k.o,object:k.G[k.D]}),t(i,{id:k.vt+"-0",addClass:k.B,"aria-selected":"true"}),o(k.o,k.vt+"-0")}},this.it=function(){k.u.textContent.length>0&&!s(k.h,"contains",k.$)&&(t(k.o,{"aria-expanded":"true",addClass:k.v+"-expanded"}),s(k.h,"add",k.$),i(k.u,k.h),k.dt(),k.ut({type:"showItems",element:k.o,results:k.u}))},this.st=function(t){t.preventDefault();var e=t.target,i=t.type,n=e.closest("li"),o=null==n?void 0:n.hasAttribute("role"),a=k.B,r=c("."+a);n&&o&&!e.closest("."+k.ht)&&("click"===i&&k.bt(n),"mousemove"!==i||s(n,"contains",a)||(k.q(r),k.xt(n),k.D=k.kt(n),k.ft({index:k.D,element:k.o,object:k.G[k.D]})))},this.bt=function(t){t&&0!==k.G.length?(k.M&&s(k.j,"remove","hidden"),k.o.value=e(t),k.yt({index:k.D,element:k.o,object:k.G[k.D],results:k.u}),k.lt||(k.q(t),k.S()),k.V("remove")):!k.lt&&k.S()},this.kt=function(t){return Array.prototype.indexOf.call(k.ct,t)},this.et=function(t){var i=t.keyCode,n=s(k.h,"contains",k.$),a=k.G.length+1;switch(k.Ct=c("."+k.B),i){case f:case v:if(t.preventDefault(),a<=1&&k.F||!n)return;if(i===f?(k.D<0&&(k.D=a-1),k.D-=1):(k.D+=1,k.D>=a&&(k.D=0)),k.q(k.Ct),k.D>=0&&k.D<a-1){var r=k.ct[k.D];k.P&&n&&(k.o.value=e(r)),k.ft({index:k.D,element:k.o,object:k.G[k.D]}),k.xt(r)}else k.V(),o(k.o),k.ft({index:null,element:k.o,object:null});break;case h:t.preventDefault(),k.bt(k.Ct);break;case m:case l:t.stopPropagation(),k.S()}},this.xt=function(e){var i=k.vt+"-"+k.kt(e);t(e,{id:i,"aria-selected":"true",addClass:k.B}),o(k.o,i),a(e,k.l,k.rt,k.u)},this.q=function(e){e&&t(e,{id:"",removeClass:k.B,"aria-selected":"false"})},this.i=function(){k.M&&(t(k.j,{class:k.v+"-clear hidden",type:"button",title:k.jt,"aria-label":k.jt}),k.o.insertAdjacentElement("afterend",k.j))},this.destroy=function(){k.M&&s(k.j,"add","hidden"),k.o.value="",k.o.focus(),k.u.textContent="",k.S(),k.W(),k.wt(k.o),d(k.o,"keydown",k.et),d(k.o,"click",k.it),d(document,"click",k.nt)},this.T=p,this.o=document.getElementById(p),this.U=(x=H,Boolean(x&&"function"==typeof x.then)?H:function(t){var e=t.currentValue,i=t.element;return Promise.resolve(H({currentValue:e,element:i}))}),this.ot=L,this.k=Z,this.yt=Q,this.ft=st,this.ut=U,this.wt=X,this.X=it,this.H=tt,this.I=C,this.R=O,this.M=w,this.C=g,this.F=J,this.P=S,this.p=$,this.rt=P,this.ht=D,this.jt=F||"clear the search query",this.v=E?E+"-auto":"auto",this.lt=G,this.g=z,this.l=this.v+"-"+this.T+"-results",this.A="data-cache-auto-"+this.T,this._=this.v+"-is-loading",this.$=this.v+"-is-active",this.B=this.v+"-selected",this.vt=this.v+"-selected-option",this.tt=this.v+"-error",this.O=/[|\\{}()[\]^$+*?.]/g,this.J=null,this.h=r("div"),this.u=r("ul"),this.j=r("button"),this.t()}}();
