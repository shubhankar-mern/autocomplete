/*!
* @name autocomplete
* @version 1.9.0
* @author Grzegorz Tomicki
* @link https://github.com/tomickigrzegorz/autocomplete
* @license MIT
*/
var Autocomplete=function(){"use strict";var t=function(t,e){for(var i in e)"addClass"===i?s(t,"add",e[i]):"removeClass"===i?s(t,"remove",e[i]):t.setAttribute(i,e[i])},e=function(t){return(t.firstElementChild||t).textContent.trim()},i=function(t,e){t.scrollTop=t.offsetTop-e.offsetHeight},n=function(t,e){void 0===t&&(t=!1),t&&(s(t,"remove","hidden"),c(t,"click",e))},s=function(t,e,i){return t.classList[e](i)},o=function(e,i){t(e,{"aria-activedescendant":i||""})},a=function(t,e,i,n){var s=n.previousSibling,o=s?s.offsetHeight:0;if("0"==t.getAttribute("aria-posinset")&&(n.scrollTop=t.offsetTop-function(t,e){var i=document.querySelectorAll("#"+t+" > li:not(."+e+")"),n=0;return[].slice.call(i).map((function(t){return n+=t.offsetHeight})),n}(e,i)),t.offsetTop-o<n.scrollTop)n.scrollTop=t.offsetTop-o;else{var a=t.offsetTop+t.offsetHeight-o;a>n.scrollTop+n.offsetHeight&&(n.scrollTop=a-n.offsetHeight)}},r=function(t){return document.createElement(t)},u=function(t){return document.querySelector(t)},c=function(t,e,i){t.addEventListener(e,i)},d=function(t,e,i){t.removeEventListener(e,i)},l=27,h=13,f=38,v=40,m=9;return function(p,b){var x,k=this,y=b.delay,C=void 0===y?500:y,j=b.clearButton,w=void 0===j||j,V=b.clearButtonOnInitial,O=void 0!==V&&V,g=b.howManyCharacters,A=void 0===g?1:g,$=b.selectFirst,I=void 0!==$&&$,J=b.insertToInput,N=void 0!==J&&J,S=b.showAllValues,T=void 0!==S&&S,q=b.cache,z=void 0!==q&&q,B=b.disableCloseOnSelect,G=void 0!==B&&B,P=b.preventScrollUp,D=void 0!==P&&P,E=b.classGroup,F=b.classPreventClosing,H=b.classPrefix,K=b.ariaLabelClear,L=b.onSearch,M=b.onResults,Q=void 0===M?function(){}:M,R=b.onSubmit,U=void 0===R?function(){}:R,W=b.onOpened,X=void 0===W?function(){}:W,Y=b.onReset,Z=void 0===Y?function(){}:Y,_=b.onRender,tt=void 0===_?function(){}:_,et=b.onClose,it=void 0===et?function(){}:et,nt=b.noResults,st=void 0===nt?function(){}:nt,ot=b.onSelectedItem,at=void 0===ot?function(){}:ot;this.t=function(){var e,i,s,o,a;k.i(),e=k.o,i=k.u,s=k.l,o=k.h,a=k.v,t(i,{id:s,tabIndex:"0",role:"listbox"}),t(o,{addClass:a+"-results-wrapper"}),o.insertAdjacentElement("beforeend",i),e.parentNode.insertBefore(o,e.nextSibling),c(k.o,"input",k.m),k.p&&c(k.o,"click",k.m),k.k({element:k.o,results:k.u}),k.C&&n(k.j,k.destroy)},this.V=function(t,e){k.O&&("update"===t?k.o.setAttribute(k.A,e.value):"remove"===t?k.o.removeAttribute(k.A):k.o.value=k.o.getAttribute(k.A))},this.m=function(t){var e=t.target,i=t.type;if("true"!==k.o.getAttribute("aria-expanded")||"click"!==i){var n=e.value.replace(k.$,"\\$&");k.V("update",e);var s=k.p?0:k.I;clearTimeout(k.J),k.J=setTimeout((function(){k.N(n.trim())}),s)}},this.S=function(){var e;s(k.h,"remove",k.T);var i={"aria-owns":k.q+"-list","aria-expanded":"false","aria-autocomplete":"list",role:"combobox",removeClass:"auto-expanded"},n=k.B?i:Object.assign({},i,{"aria-activedescendant":""});t(k.o,n),k.B||(k.G(u("."+k.P)),k.D=k.F?0:-1),(0==(null==(e=k.H)?void 0:e.length)&&!k.K||k.p)&&(k.u.textContent=""),k.L()},this.N=function(t){k.M=t,k.R(!0),n(k.j,k.destroy),0==t.length&&k.U&&s(k.j,"add","hidden"),k.W>t.length&&!k.p?k.R():k.X({currentValue:t,element:k.o}).then((function(e){var i=k.o.value.length,n=e.length;k.H=Array.isArray(e)?e:JSON.parse(JSON.stringify(e)),k.R(),k.Y(),0==n&&0==i&&s(k.j,"add","hidden"),0==n&&i?(s(k.o,"remove","auto-expanded"),k.S(),k.Z({element:k.o,currentValue:t,template:k._}),k.tt()):(n>0||function(t){return t&&"object"==typeof t&&t.constructor===Object}(e))&&(k.D=k.F?0:-1,k._(),k.tt())})).catch((function(){k.R(),k.S()}))},this.R=function(t){return k.o.parentNode.classList[t?"add":"remove"](k.et)},this.Y=function(){return s(k.o,"remove",k.it)},this.tt=function(){c(k.o,"keydown",k.nt),c(k.o,"click",k.st),c(document,"click",k.ot),["mousemove","click"].map((function(t){c(k.u,t,k.rt)}))},this._=function(e){t(k.o,{"aria-expanded":"true",addClass:k.v+"-expanded"}),k.u.textContent="";var n=0===k.H.length?k.ut({currentValue:k.M,matches:0,template:e}):k.ut({currentValue:k.M,matches:k.H,classGroup:k.ct});k.u.insertAdjacentHTML("afterbegin",n),s(k.h,"add",k.T);var o=k.ct?":not(."+k.ct+")":"";k.dt=document.querySelectorAll("#"+k.l+" > li"+o),function(e){for(var i=0;i<e.length;i++)t(e[i],{role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":e.length,"aria-posinset":i})}(k.dt),k.lt({type:"results",element:k.o,results:k.u}),k.ht(),i(k.u,k.h)},this.ot=function(t){var e=t.target,i=null;(e.closest("ul")&&k.ft||e.closest("."+k.vt))&&(i=!0),e.id===k.q||i||k.S()},this.ht=function(){if(k.G(u("."+k.P)),k.F){var e=k.u.firstElementChild,i=k.ct&&k.H.length>0&&k.F?e.nextElementSibling:e;k.bt({index:k.D,element:k.o,object:k.H[k.D]}),t(i,{id:k.xt+"-0",addClass:k.P,"aria-selected":"true"}),o(k.o,k.xt+"-0")}},this.st=function(){if(k.u.textContent.length>0&&!s(k.h,"contains",k.T)){if(t(k.o,{"aria-expanded":"true",addClass:k.v+"-expanded"}),s(k.h,"add",k.T),k.B||(i(k.u,k.h),k.ht()),k.lt({type:"showItems",element:k.o,results:k.u}),!k.O)return;k.V("update",k.o)}},this.rt=function(t){t.preventDefault();var e=t.target,i=t.type,n=e.closest("li"),o=null==n?void 0:n.hasAttribute("role"),a=k.P,r=u("."+a);n&&o&&!e.closest("."+k.vt)&&("click"===i&&k.kt(n),"mousemove"!==i||s(n,"contains",a)||(k.G(r),k.yt(n),k.D=k.Ct(n),k.bt({index:k.D,element:k.o,object:k.H[k.D]})))},this.kt=function(t){t&&0!==k.H.length?(k.U&&s(k.j,"remove","hidden"),k.o.value=e(t),k.jt({index:k.D,element:k.o,object:k.H[k.D],results:k.u}),k.ft||(k.B||k.G(t),k.S()),k.V("remove")):!k.ft&&k.S()},this.Ct=function(t){return Array.prototype.indexOf.call(k.dt,t)},this.nt=function(t){var i=t.keyCode,n=s(k.h,"contains",k.T),a=k.H.length+1;switch(k.wt=u("."+k.P),i){case f:case v:if(t.preventDefault(),a<=1&&k.F||!n)return;if(i===f?(k.D<0&&(k.D=a-1),k.D-=1):(k.D+=1,k.D>=a&&(k.D=0)),k.G(k.wt),k.D>=0&&k.D<a-1){var r=k.dt[k.D];k.K&&n&&(k.o.value=e(r)),k.bt({index:k.D,element:k.o,object:k.H[k.D]}),k.yt(r)}else k.V(),o(k.o),k.bt({index:null,element:k.o,object:null});break;case h:t.preventDefault(),k.kt(k.wt);break;case m:case l:t.stopPropagation(),k.S()}},this.yt=function(e){var i=k.xt+"-"+k.Ct(e);t(e,{id:i,"aria-selected":"true",addClass:k.P}),o(k.o,i),a(e,k.l,k.ct,k.u)},this.G=function(e){e&&t(e,{id:"",removeClass:k.P,"aria-selected":"false"})},this.i=function(){k.U&&(t(k.j,{class:k.v+"-clear hidden",type:"button",title:k.Vt,"aria-label":k.Vt}),k.o.insertAdjacentElement("afterend",k.j))},this.rerender=function(t){var e=null!=t&&t.trim()?t.trim():k.o.value;null!=t&&t.trim()&&(k.o.value=t.trim(),k.V("update",k.o));var i=e.replace(k.$,"\\$&");k.N(i.trim())},this.destroy=function(){k.U&&s(k.j,"add","hidden"),k.o.value="",k.o.focus(),k.u.textContent="",k.S(),k.Y(),k.Ot(k.o),d(k.o,"keydown",k.nt),d(k.o,"click",k.st),d(document,"click",k.ot)},this.q=p,this.o=document.getElementById(p),this.X=(x=L,Boolean(x&&"function"==typeof x.then)?L:function(t){var e=t.currentValue,i=t.element;return Promise.resolve(L({currentValue:e,element:i}))}),this.ut=Q,this.k=tt,this.jt=U,this.bt=at,this.lt=X,this.Ot=Z,this.Z=st,this.L=it,this.I=C,this.W=A,this.U=w,this.C=O,this.F=I,this.K=N,this.p=T,this.ct=E,this.vt=F,this.Vt=K||"clear the search query",this.v=H?H+"-auto":"auto",this.ft=G,this.B=D,this.O=z,this.l=this.v+"-"+this.q+"-results",this.A="data-cache-auto-"+this.q,this.et=this.v+"-is-loading",this.T=this.v+"-is-active",this.P=this.v+"-selected",this.xt=this.v+"-selected-option",this.it=this.v+"-error",this.$=/[|\\{}()[\]^$+*?.]/g,this.J=null,this.h=r("div"),this.u=r("ul"),this.j=r("button"),this.t()}}();
