{"version":3,"file":"autocomplete.js","sources":["../../sources/js/utils/function.js","../../sources/js/utils/keyCodes.js","../../sources/js/script.js"],"sourcesContent":["/**\r\n * Check is a Object\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nconst isObject = (value) =>\r\n  value && typeof value === \"object\" && value.constructor === Object;\r\n\r\n/**\r\n * Check if is a Promise\r\n * https://stackoverflow.com/a/53955664/10424385\r\n *\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nconst isPromise = (value) => Boolean(value && typeof value.then === \"function\");\r\n\r\n/**\r\n * Set attributes to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {Object} object\r\n */\r\nconst setAttributes = (el, object) => {\r\n  for (let key in object) {\r\n    if (key === \"addClass\") {\r\n      classList(el, \"add\", object[key]);\r\n    } else if (key === \"removeClass\") {\r\n      classList(el, \"remove\", object[key]);\r\n    } else {\r\n      el.setAttribute(key, object[key]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get first element from child\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {HTMLELement}\r\n */\r\nconst getFirstElement = (element) =>\r\n  (element.firstElementChild || element).textContent.trim();\r\n\r\n/**\r\n * Scroll to top result-list\r\n * @param {HTMLElement} resultList\r\n * @param {HTMLElement} resultWrap\r\n */\r\nconst scrollResultsToTop = (resultList, resultWrap) => {\r\n  // if there is an overflow of ul element, after\r\n  // opening we always move ul to the top of the results\r\n  resultList.scrollTop = resultList.offsetTop - resultWrap.offsetHeight;\r\n};\r\n\r\n/**\r\n * Adding role, tabindex, aria and call handleMouse\r\n *\r\n * @param {HTMLElement} itemsLi\r\n */\r\nconst addAriaToAllLiElements = (itemsLi) => {\r\n  // add role to all li elements\r\n  for (let i = 0; i < itemsLi.length; i++) {\r\n    setAttributes(itemsLi[i], {\r\n      role: \"option\",\r\n      tabindex: \"-1\",\r\n      \"aria-selected\": \"false\",\r\n      \"aria-setsize\": itemsLi.length,\r\n      \"aria-posinset\": i,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Show btn to clear data\r\n *\r\n * @param {HTMLElement} clearButton - button to clear data\r\n * @param {Function} destroy - destroy function\r\n */\r\nconst showBtnToClearData = (clearButton = false, destroy) => {\r\n  if (!clearButton) return;\r\n\r\n  classList(clearButton, \"remove\", \"hidden\");\r\n  // add event to clear button\r\n  onEvent(clearButton, \"click\", destroy);\r\n};\r\n\r\n/**\r\n * ClassList add/remove/contains\r\n *\r\n * @param {HTMLElement} element - html element\r\n * @param {String} action - add/remove/contains\r\n * @param {String} className - class name\r\n */\r\nconst classList = (element, action, className) =>\r\n  element.classList[action](className);\r\n\r\n/**\r\n * Set aria-activedescendant\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {String} type\r\n */\r\nconst setAriaActivedescendant = (root, type) => {\r\n  setAttributes(root, {\r\n    \"aria-activedescendant\": type || \"\",\r\n  });\r\n};\r\n\r\n/**\r\n * Get height of ul without group class\r\n *\r\n * @param {String} outputUl\r\n * @param {String} classGroup\r\n * @returns {Number}\r\n */\r\nconst getClassGroupHeight = (outputUl, classGroup) => {\r\n  // get height of ul without group class\r\n  const allLiElements = document.querySelectorAll(\r\n    `#${outputUl} > li:not(.${classGroup})`\r\n  );\r\n  let height = 0;\r\n  [].slice.call(allLiElements).map((el) => (height += el.offsetHeight));\r\n\r\n  // return height\r\n  return height;\r\n};\r\n\r\n/**\r\n * Scroll into view when press up/down arrows\r\n *\r\n * @param {HTMLElement} target\r\n * @param {HTMLElement} outputUl\r\n * @param {String} classGroup\r\n * @param {HTMLElement} resultList\r\n */\r\nconst followActiveElement = (target, outputUl, classGroup, resultList) => {\r\n  const previusElement = resultList.previousSibling;\r\n\r\n  const previusElementHeight = previusElement ? previusElement.offsetHeight : 0;\r\n\r\n  if (target.getAttribute(\"aria-posinset\") == \"0\") {\r\n    resultList.scrollTop =\r\n      target.offsetTop - getClassGroupHeight(outputUl, classGroup);\r\n  }\r\n\r\n  if (target.offsetTop - previusElementHeight < resultList.scrollTop) {\r\n    resultList.scrollTop = target.offsetTop - previusElementHeight;\r\n  } else {\r\n    const offsetBottom =\r\n      target.offsetTop + target.offsetHeight - previusElementHeight;\r\n    const scrollBottom = resultList.scrollTop + resultList.offsetHeight;\r\n    if (offsetBottom > scrollBottom) {\r\n      resultList.scrollTop = offsetBottom - resultList.offsetHeight;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Create output-list and put after search input\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {HTMLElement} resultList - output-list ul\r\n * @param {String} outputUl - id name of output-list\r\n * @param {HTMLElement} resultWrap - wrapper ul element\r\n * @param {String} prefix - add prefix to all class auto\r\n */\r\nconst output = (root, resultList, outputUl, resultWrap, prefix) => {\r\n  // set attribute to results-list\r\n  setAttributes(resultList, {\r\n    id: outputUl,\r\n    tabIndex: \"0\",\r\n    role: \"listbox\",\r\n  });\r\n\r\n  // add class to wrap element\r\n  setAttributes(resultWrap, {\r\n    addClass: `${prefix}-results-wrapper`,\r\n  });\r\n\r\n  // insert the results into the wrap element\r\n  resultWrap.insertAdjacentElement(\"beforeend\", resultList);\r\n\r\n  // insert the wrap element after the search input\r\n  root.parentNode.insertBefore(resultWrap, root.nextSibling);\r\n};\r\n\r\n/**\r\n * Create element\r\n *\r\n * @param {String} type - type of element\r\n * @returns {HTMLDivElement}\r\n */\r\nconst createElement = (type) => document.createElement(type);\r\n\r\n/**\r\n * Get element\r\n *\r\n * @param {String} element\r\n * @returns {HTMLElement}\r\n */\r\nconst select = (element) => document.querySelector(element);\r\n\r\n/**\r\n * Event listeners\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} action\r\n * @param {Function} callback\r\n */\r\nconst onEvent = (element, action, callback) => {\r\n  element.addEventListener(action, callback);\r\n};\r\n\r\n/**\r\n * Remove event listeners\r\n */\r\nconst offEvent = (element, action, callback) => {\r\n  element.removeEventListener(action, callback);\r\n};\r\n\r\nexport {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n};\r\n","/**\r\n * Key codes\r\n */\r\nconst keyCodes = {\r\n  ESC: 27,\r\n  ENTER: 13,\r\n  UP: 38,\r\n  DOWN: 40,\r\n  TAB: 9,\r\n};\r\n\r\nexport default keyCodes;\r\n","import {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n} from \"./utils/function\";\r\n\r\nimport keyCodes from \"./utils/keyCodes\";\r\n\r\n/**\r\n * @class Autocomplete\r\n */\r\nexport default class Autocomplete {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {String} element\r\n   * @param {Object} object\r\n   */\r\n  constructor(\r\n    element,\r\n    {\r\n      delay = 500,\r\n      clearButton = true,\r\n      clearButtonOnInitial = false,\r\n      howManyCharacters = 1,\r\n      selectFirst = false,\r\n      insertToInput = false,\r\n      showAllValues = false,\r\n      cache = false,\r\n      disableCloseOnSelect = false,\r\n      preventScrollUp = false,\r\n      classGroup,\r\n      classPreventClosing,\r\n      classPrefix,\r\n      ariaLabelClear,\r\n      onSearch,\r\n      onResults = () => {},\r\n      onSubmit = () => {},\r\n      onOpened = () => {},\r\n      onReset = () => {},\r\n      onRender = () => {},\r\n      onClose = () => {},\r\n      noResults = () => {},\r\n      onSelectedItem = () => {},\r\n    }\r\n  ) {\r\n    this._id = element;\r\n    this._root = document.getElementById(element);\r\n    this._onSearch = isPromise(onSearch)\r\n      ? onSearch\r\n      : ({ currentValue, element }) =>\r\n          Promise.resolve(onSearch({ currentValue, element }));\r\n    this._onResults = onResults;\r\n    this._onRender = onRender;\r\n    this._onSubmit = onSubmit;\r\n    this._onSelected = onSelectedItem;\r\n    this._onOpened = onOpened;\r\n    this._onReset = onReset;\r\n    this._noResults = noResults;\r\n    this._onClose = onClose;\r\n\r\n    this._delay = delay;\r\n    this._characters = howManyCharacters;\r\n    this._clearButton = clearButton;\r\n    this._clearButtonOnInitial = clearButtonOnInitial;\r\n    this._selectFirst = selectFirst;\r\n    this._toInput = insertToInput;\r\n    this._showAll = showAllValues;\r\n    this._classGroup = classGroup;\r\n    this._prevClosing = classPreventClosing;\r\n    this._clearBtnAriLabel = ariaLabelClear\r\n      ? ariaLabelClear\r\n      : \"clear the search query\";\r\n    this._prefix = classPrefix ? `${classPrefix}-auto` : \"auto\";\r\n    this._disable = disableCloseOnSelect;\r\n    this._preventScrollUp = preventScrollUp;\r\n\r\n    // default config\r\n    this._cache = cache;\r\n    this._outputUl = `${this._prefix}-${this._id}-results`;\r\n    this._cacheData = `data-cache-auto-${this._id}`;\r\n    this._isLoading = `${this._prefix}-is-loading`;\r\n    this._isActive = `${this._prefix}-is-active`;\r\n    this._activeList = `${this._prefix}-selected`;\r\n    this._selectedOption = `${this._prefix}-selected-option`;\r\n    this._err = `${this._prefix}-error`;\r\n    this._regex = /[|\\\\{}()[\\]^$+*?.]/g;\r\n    this._timeout = null;\r\n\r\n    this._resultWrap = createElement(\"div\");\r\n    this._resultList = createElement(\"ul\");\r\n    this._clearBtn = createElement(\"button\");\r\n\r\n    this._initial();\r\n  }\r\n\r\n  /**\r\n   * Initial function\r\n   */\r\n  _initial = () => {\r\n    this._clearbutton();\r\n\r\n    output(\r\n      this._root,\r\n      this._resultList,\r\n      this._outputUl,\r\n      this._resultWrap,\r\n      this._prefix\r\n    );\r\n\r\n    // default aria\r\n    onEvent(this._root, \"input\", this._handleInput);\r\n\r\n    // show all values on click root input\r\n    this._showAll && onEvent(this._root, \"click\", this._handleInput);\r\n\r\n    // calback functions\r\n    this._onRender({\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // show clear button if\r\n    if (this._clearButtonOnInitial) {\r\n      showBtnToClearData(this._clearBtn, this.destroy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Actions on input\r\n   *\r\n   * @param {String} type - set attribute depending on type\r\n   * @param {String} target\r\n   */\r\n  _cacheAct = (type, target) => {\r\n    if (!this._cache) return;\r\n\r\n    if (type === \"update\") {\r\n      this._root.setAttribute(this._cacheData, target.value);\r\n    } else if (type === \"remove\") {\r\n      this._root.removeAttribute(this._cacheData);\r\n    } else {\r\n      this._root.value = this._root.getAttribute(this._cacheData);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle input\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleInput = ({ target, type }) => {\r\n    if (\r\n      this._root.getAttribute(\"aria-expanded\") === \"true\" &&\r\n      type === \"click\"\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // replace all special characters\r\n    const regex = target.value.replace(this._regex, \"\\\\$&\");\r\n\r\n    // update data attribute cache\r\n    this._cacheAct(\"update\", target);\r\n\r\n    const delay = this._showAll ? 0 : this._delay;\r\n    // clear timeout\r\n    clearTimeout(this._timeout);\r\n    this._timeout = setTimeout(() => {\r\n      this._searchItem(regex.trim());\r\n    }, delay);\r\n  };\r\n\r\n  /**\r\n   * Default aria\r\n   */\r\n  _reset = () => {\r\n    // set attributes to root - input\r\n    setAttributes(this._root, {\r\n      \"aria-owns\": `${this._id}-list`,\r\n      \"aria-expanded\": \"false\",\r\n      \"aria-autocomplete\": \"list\",\r\n      \"aria-activedescendant\": \"\",\r\n      role: \"combobox\",\r\n      removeClass: \"auto-expanded\",\r\n    });\r\n\r\n    // remove class isActive\r\n    classList(this._resultWrap, \"remove\", this._isActive);\r\n\r\n    // set default aria-selected, remove id and remove class 'auto-selected'\r\n    this._removeAria(select(`.${this._activeList}`));\r\n\r\n    // remove result when lengh = 0 and insertToInput is false\r\n    // https://github.com/tomickigrzegorz/autocomplete/issues/136\r\n    if ((this._matches?.length == 0 && !this._toInput) || this._showAll) {\r\n      this._resultList.textContent = \"\";\r\n    }\r\n\r\n    // set index\r\n    this._index = this._selectFirst ? 0 : -1;\r\n\r\n    // callback function\r\n    this._onClose();\r\n  };\r\n\r\n  /**\r\n   * The async function gets the text from the search\r\n   * and returns the matching array\r\n   *\r\n   * @param {String} value\r\n   */\r\n  _searchItem = (value) => {\r\n    this._value = value;\r\n\r\n    // if searching show loading icon\r\n    this._onLoading(true);\r\n\r\n    // hide button clear\r\n    showBtnToClearData(this._clearBtn, this.destroy);\r\n\r\n    // if there is no value and clearButton is true\r\n    if (value.length == 0 && this._clearButton) {\r\n      classList(this._clearBtn, \"add\", \"hidden\");\r\n    }\r\n\r\n    // if declare characters more then value.len and showAll is false\r\n    // remove class isActive\r\n    if (this._characters > value.length && !this._showAll) {\r\n      this._onLoading();\r\n      return;\r\n    }\r\n\r\n    // callblack function onSearch\r\n    this._onSearch({ currentValue: value, element: this._root })\r\n      .then((result) => {\r\n        const rootValueLength = this._root.value.length;\r\n        const resultLength = result.length;\r\n        // set no result\r\n        this._matches = Array.isArray(result)\r\n          ? result\r\n          : JSON.parse(JSON.stringify(result));\r\n\r\n        this._onLoading();\r\n        this._error();\r\n\r\n        // if use destroy() method\r\n        if (resultLength == 0 && rootValueLength == 0) {\r\n          classList(this._clearBtn, \"add\", \"hidden\");\r\n        }\r\n\r\n        if (resultLength == 0 && rootValueLength) {\r\n          classList(this._root, \"remove\", \"auto-expanded\");\r\n          this._reset();\r\n          this._noResults({\r\n            element: this._root,\r\n            currentValue: value,\r\n            template: this._results,\r\n          });\r\n          this._events();\r\n        } else if (resultLength > 0 || isObject(result)) {\r\n          this._index = this._selectFirst ? 0 : -1;\r\n          this._results();\r\n          this._events();\r\n        }\r\n      })\r\n      .catch(() => {\r\n        this._onLoading();\r\n        this._reset();\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Set or remove loading class\r\n   *\r\n   * @param {Boolean} type\r\n   */\r\n  _onLoading = (type) =>\r\n    this._root.parentNode.classList[type ? \"add\" : \"remove\"](this._isLoading);\r\n\r\n  /**\r\n   * Set error class to the root element\r\n   */\r\n  _error = () => classList(this._root, \"remove\", this._err);\r\n\r\n  /**\r\n   * Events\r\n   */\r\n  _events = () => {\r\n    // handle click on keydown [up, down, enter, tab, esc]\r\n    onEvent(this._root, \"keydown\", this._handleKeys);\r\n\r\n    onEvent(this._root, \"click\", this._handleShowItems);\r\n\r\n    // close expanded items\r\n    onEvent(document, \"click\", this._handleDocClick);\r\n\r\n    // temporarily disabled mouseleave\r\n    [\"mousemove\", \"click\"].map((eventType) => {\r\n      onEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Results\r\n   *\r\n   * @param {HTMLElement|String} template - html or string returned from the function,\r\n   * look at the example - https://github.com/tomickigrzegorz/autocomplete/blob/master/docs/js/examples/no-results.js#L30\r\n   */\r\n  _results = (template) => {\r\n    // set attribute to root\r\n    setAttributes(this._root, {\r\n      \"aria-expanded\": \"true\",\r\n      addClass: `${this._prefix}-expanded`,\r\n    });\r\n\r\n    // clear result list\r\n    this._resultList.textContent = \"\";\r\n\r\n    // add all found records to otput ul\r\n    const dataResults =\r\n      this._matches.length === 0\r\n        ? this._onResults({\r\n            currentValue: this._value,\r\n            matches: 0,\r\n            template,\r\n          })\r\n        : this._onResults({\r\n            currentValue: this._value,\r\n            matches: this._matches,\r\n            classGroup: this._classGroup,\r\n          });\r\n\r\n    // add data to ul\r\n    this._resultList.insertAdjacentHTML(\"afterbegin\", dataResults);\r\n\r\n    // add class isActive\r\n    classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n    const checkIfClassGroupExist = this._classGroup\r\n      ? `:not(.${this._classGroup})`\r\n      : \"\";\r\n\r\n    this._itemsLi = document.querySelectorAll(\r\n      `#${this._outputUl} > li${checkIfClassGroupExist}`\r\n    );\r\n\r\n    // adding role, tabindex and aria\r\n    addAriaToAllLiElements(this._itemsLi);\r\n\r\n    // action on open results\r\n    this._onOpened({\r\n      type: \"results\",\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // select first element\r\n    this._selectFirstElement();\r\n\r\n    // move the view item to the first item\r\n    // this.resultList.scrollTop = 0;\r\n    if (this._preventScrollUp) return;\r\n    scrollResultsToTop(this._resultList, this._resultWrap);\r\n  };\r\n\r\n  /**\r\n   * Hangle click on document\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleDocClick = ({ target }) => {\r\n    let disableClose = null;\r\n\r\n    // if 'target' is a ul and 'disableCloseOnSelect'\r\n    // is a 'true' set 'disableClose' on true\r\n    if (\r\n      (target.closest(\"ul\") && this._disable) ||\r\n      // when class classDisableClose\r\n      // then do not not close results\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      disableClose = true;\r\n    }\r\n\r\n    if (target.id !== this._id && !disableClose) {\r\n      this._reset();\r\n      return;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select first element\r\n   */\r\n  _selectFirstElement = () => {\r\n    this._removeAria(select(`.${this._activeList}`));\r\n\r\n    if (!this._selectFirst) {\r\n      return;\r\n    }\r\n\r\n    const { firstElementChild } = this._resultList;\r\n\r\n    const classSelectFirst =\r\n      this._classGroup && this._matches.length > 0 && this._selectFirst\r\n        ? firstElementChild.nextElementSibling\r\n        : firstElementChild;\r\n\r\n    // calback function onSelect when first element is true\r\n    this._onSelected({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n    });\r\n\r\n    // set attribute to first element\r\n    setAttributes(classSelectFirst, {\r\n      id: `${this._selectedOption}-0`,\r\n      addClass: this._activeList,\r\n      \"aria-selected\": \"true\",\r\n    });\r\n\r\n    // set aria active descendant\r\n    setAriaActivedescendant(this._root, `${this._selectedOption}-0`);\r\n  };\r\n\r\n  /**\r\n   * show items when items.length > 0 and is not empty\r\n   */\r\n  _handleShowItems = () => {\r\n    // if resultWrap is not active and resultList is not empty\r\n    if (\r\n      this._resultList.textContent.length > 0 &&\r\n      !classList(this._resultWrap, \"contains\", this._isActive)\r\n    ) {\r\n      // set attribute to root\r\n      setAttributes(this._root, {\r\n        \"aria-expanded\": \"true\",\r\n        addClass: `${this._prefix}-expanded`,\r\n      });\r\n\r\n      // add isActive class to resultWrap\r\n      classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n      // move the view item to the first item\r\n      // this.resultList.scrollTop = 0;\r\n      if (!this._preventScrollUp) {\r\n        scrollResultsToTop(this._resultList, this._resultWrap);\r\n      }\r\n\r\n      // select first element\r\n      this._selectFirstElement();\r\n\r\n      // callback function\r\n      this._onOpened({\r\n        type: \"showItems\",\r\n        element: this._root,\r\n        results: this._resultList,\r\n      });\r\n\r\n      if (!this._cache) return;\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adding text from the list when li is clicking\r\n   * or adding aria-selected to li elements\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleMouse = (event) => {\r\n    event.preventDefault();\r\n\r\n    const { target, type } = event;\r\n    const targetClosest = target.closest(\"li\");\r\n    const targetClosestRole = targetClosest?.hasAttribute(\"role\");\r\n    const activeClass = this._activeList;\r\n    const activeClassElement = select(`.${activeClass}`);\r\n\r\n    if (\r\n      !targetClosest ||\r\n      !targetClosestRole ||\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (type === \"click\") {\r\n      // click on li get element\r\n      // get text from clicked li\r\n      this._getTextFromLi(targetClosest);\r\n    }\r\n\r\n    if (\r\n      type === \"mousemove\" &&\r\n      !classList(targetClosest, \"contains\", activeClass)\r\n    ) {\r\n      this._removeAria(activeClassElement);\r\n\r\n      // add aria to li\r\n      this._setAria(targetClosest);\r\n      this._index = this._indexLiSelected(targetClosest);\r\n\r\n      this._onSelected({\r\n        index: this._index,\r\n        element: this._root,\r\n        object: this._matches[this._index],\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get text from li on enter or click\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _getTextFromLi = (element) => {\r\n    if (!element || this._matches.length === 0) {\r\n      // set default settings\r\n      !this._disable && this._reset();\r\n\r\n      return;\r\n    }\r\n\r\n    // show clearBtn when select element\r\n    this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n\r\n    // get first element from li and set it to root\r\n    this._root.value = getFirstElement(element);\r\n\r\n    // onSubmit passing text to function\r\n    this._onSubmit({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n      results: this._resultList,\r\n    });\r\n\r\n    // set default settings\r\n    if (!this._disable) {\r\n      this._removeAria(element);\r\n      this._reset();\r\n    }\r\n\r\n    // remove cache\r\n    this._cacheAct(\"remove\");\r\n  };\r\n\r\n  /**\r\n   * Return which li element was selected\r\n   * by hovering the mouse over\r\n   *\r\n   * @param {HTMLElement} target\r\n   * @returns {Number}\r\n   */\r\n  _indexLiSelected = (target) =>\r\n    // get index of li element\r\n    Array.prototype.indexOf.call(this._itemsLi, target);\r\n\r\n  /**\r\n   * Navigating the elements li and enter\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleKeys = (event) => {\r\n    const { keyCode } = event;\r\n\r\n    const resultList = classList(this._resultWrap, \"contains\", this._isActive);\r\n\r\n    const matchesLength = this._matches.length + 1;\r\n    this._selectedLi = select(`.${this._activeList}`);\r\n\r\n    // switch between keys\r\n    switch (keyCode) {\r\n      case keyCodes.UP:\r\n      case keyCodes.DOWN:\r\n        // Wrong cursor position in the input field #62\r\n        // Prevents the cursor from moving to the beginning\r\n        // of input as the cursor hovers over the results.\r\n        event.preventDefault();\r\n\r\n        if ((matchesLength <= 1 && this._selectFirst) || !resultList) {\r\n          return;\r\n        }\r\n\r\n        // if keyCode is up\r\n        if (keyCode === keyCodes.UP) {\r\n          if (this._index < 0) {\r\n            this._index = matchesLength - 1;\r\n          }\r\n          this._index -= 1;\r\n        } else {\r\n          this._index += 1;\r\n          if (this._index >= matchesLength) {\r\n            this._index = 0;\r\n          }\r\n        }\r\n\r\n        // remove aria-selected\r\n        this._removeAria(this._selectedLi);\r\n\r\n        if (this._index >= 0 && this._index < matchesLength - 1) {\r\n          const selectedElement = this._itemsLi[this._index];\r\n\r\n          if (this._toInput && resultList) {\r\n            this._root.value = getFirstElement(selectedElement);\r\n          }\r\n\r\n          // callback function\r\n          this._onSelected({\r\n            index: this._index,\r\n            element: this._root,\r\n            object: this._matches[this._index],\r\n          });\r\n\r\n          // set aria-selected\r\n          this._setAria(selectedElement);\r\n        } else {\r\n          // catch action\r\n          this._cacheAct();\r\n          setAriaActivedescendant(this._root);\r\n\r\n          this._onSelected({\r\n            index: null,\r\n            element: this._root,\r\n            object: null,\r\n          });\r\n        }\r\n\r\n        break;\r\n      // keycode enter\r\n      case keyCodes.ENTER:\r\n        // https:github.com/tomickigrzegorz/autocomplete/issues/145\r\n        event.preventDefault();\r\n\r\n        this._getTextFromLi(this._selectedLi);\r\n        break;\r\n\r\n      // keycode escape and keycode tab\r\n      case keyCodes.TAB:\r\n      case keyCodes.ESC:\r\n        event.stopPropagation();\r\n        this._reset();\r\n\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria label on item li\r\n   *\r\n   * @param {HTMLElement} target\r\n   */\r\n  _setAria = (target) => {\r\n    const selectedOption = `${this._selectedOption}-${this._indexLiSelected(\r\n      target\r\n    )}`;\r\n\r\n    // set aria to li\r\n    setAttributes(target, {\r\n      id: selectedOption,\r\n      \"aria-selected\": \"true\",\r\n      addClass: this._activeList,\r\n    });\r\n\r\n    setAriaActivedescendant(this._root, selectedOption);\r\n\r\n    // scrollIntoView when press up/down arrows\r\n    followActiveElement(\r\n      target,\r\n      this._outputUl,\r\n      this._classGroup,\r\n      this._resultList\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Remove aria label from item li\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _removeAria = (element) => {\r\n    if (!element) return;\r\n\r\n    // remove aria from li\r\n    setAttributes(element, {\r\n      id: \"\",\r\n      removeClass: this._activeList,\r\n      \"aria-selected\": \"false\",\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Create clear button and\r\n   * removing text from the input field\r\n   */\r\n  _clearbutton = () => {\r\n    // stop when clear button is disabled\r\n    if (!this._clearButton) return;\r\n\r\n    // add aria to clear button\r\n    setAttributes(this._clearBtn, {\r\n      class: `${this._prefix}-clear hidden`,\r\n      type: \"button\",\r\n      title: this._clearBtnAriLabel,\r\n      \"aria-label\": this._clearBtnAriLabel,\r\n    });\r\n\r\n    // insert clear button after input - root\r\n    this._root.insertAdjacentElement(\"afterend\", this._clearBtn);\r\n  };\r\n\r\n  /**\r\n   * Rerender rows without remove root input and close elements\r\n   */\r\n  rerender = (inputValue) => {\r\n    const text = inputValue?.trim() ? inputValue.trim() : this._root.value;\r\n    if (inputValue?.trim()) {\r\n      this._root.value = inputValue.trim();\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n    const regexText = text.replace(this._regex, \"\\\\$&\");\r\n    this._searchItem(regexText.trim());\r\n  };\r\n\r\n  /**\r\n   * Clicking on the clear button\r\n   * publick destroy method\r\n   */\r\n  destroy = () => {\r\n    // if clear button is true then add class hidden\r\n    this._clearButton && classList(this._clearBtn, \"add\", \"hidden\");\r\n    // clear value searchId\r\n    this._root.value = \"\";\r\n    // set focus\r\n    this._root.focus();\r\n    // remove li from ul\r\n    this._resultList.textContent = \"\";\r\n    // set default aria\r\n    this._reset();\r\n    // remove error if exist\r\n    this._error();\r\n\r\n    // callback function\r\n    this._onReset(this._root);\r\n\r\n    // remove listener\r\n    offEvent(this._root, \"keydown\", this._handleKeys);\r\n    offEvent(this._root, \"click\", this._handleShowItems);\r\n    // remove listener on click on document\r\n    offEvent(document, \"click\", this._handleDocClick);\r\n  };\r\n}\r\n"],"names":["isObject","value","constructor","Object","isPromise","Boolean","then","setAttributes","el","object","key","classList","setAttribute","getFirstElement","element","firstElementChild","textContent","trim","scrollResultsToTop","resultList","resultWrap","scrollTop","offsetTop","offsetHeight","addAriaToAllLiElements","itemsLi","i","length","role","tabindex","showBtnToClearData","clearButton","destroy","onEvent","action","className","setAriaActivedescendant","root","type","getClassGroupHeight","outputUl","classGroup","allLiElements","document","querySelectorAll","height","slice","call","map","followActiveElement","target","previusElement","previousSibling","previusElementHeight","getAttribute","offsetBottom","scrollBottom","output","prefix","id","tabIndex","addClass","insertAdjacentElement","parentNode","insertBefore","nextSibling","createElement","select","querySelector","callback","addEventListener","offEvent","removeEventListener","keyCodes","ESC","ENTER","UP","DOWN","TAB","Autocomplete","_ref","delay","clearButtonOnInitial","howManyCharacters","selectFirst","insertToInput","showAllValues","cache","disableCloseOnSelect","preventScrollUp","classPreventClosing","classPrefix","ariaLabelClear","onSearch","onResults","onSubmit","onOpened","onReset","onRender","onClose","noResults","onSelectedItem","_initial","_clearbutton","_root","_resultList","_outputUl","_resultWrap","_prefix","_handleInput","_showAll","_onRender","results","_clearButtonOnInitial","_clearBtn","_cacheAct","_cache","_cacheData","removeAttribute","_ref2","regex","replace","_regex","_delay","clearTimeout","_timeout","setTimeout","_searchItem","_reset","_id","removeClass","_isActive","_removeAria","_activeList","_matches","_toInput","_index","_selectFirst","_onClose","_value","_onLoading","_clearButton","_characters","_onSearch","currentValue","result","rootValueLength","resultLength","Array","isArray","JSON","parse","stringify","_error","_noResults","template","_results","_events","catch","_isLoading","_err","_handleKeys","_handleShowItems","_handleDocClick","eventType","_handleMouse","dataResults","_onResults","matches","_classGroup","insertAdjacentHTML","checkIfClassGroupExist","_itemsLi","_onOpened","_selectFirstElement","_preventScrollUp","_ref3","disableClose","closest","_disable","_prevClosing","classSelectFirst","nextElementSibling","_onSelected","index","_selectedOption","event","preventDefault","targetClosest","targetClosestRole","hasAttribute","activeClass","activeClassElement","_getTextFromLi","_setAria","_indexLiSelected","_onSubmit","prototype","indexOf","keyCode","matchesLength","_selectedLi","selectedElement","stopPropagation","selectedOption","class","title","_clearBtnAriLabel","rerender","inputValue","text","regexText","focus","_onReset","getElementById","_ref4","Promise","resolve"],"mappings":"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"}