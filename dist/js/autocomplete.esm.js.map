{"version":3,"file":"autocomplete.esm.js","sources":["../../sources/js/utils/function.js","../../sources/js/utils/keyCodes.js","../../sources/js/script.js"],"sourcesContent":["/**\r\n * Check is a Object\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nconst isObject = (value) =>\r\n  value && typeof value === \"object\" && value.constructor === Object;\r\n\r\n/**\r\n * Check if is a Promise\r\n * https://stackoverflow.com/a/53955664/10424385\r\n *\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nconst isPromise = (value) => Boolean(value && typeof value.then === \"function\");\r\n\r\n/**\r\n * Set attributes to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {Object} object\r\n */\r\nconst setAttributes = (el, object) => {\r\n  for (let key in object) {\r\n    if (key === \"addClass\") {\r\n      classList(el, \"add\", object[key]);\r\n    } else if (key === \"removeClass\") {\r\n      classList(el, \"remove\", object[key]);\r\n    } else {\r\n      el.setAttribute(key, object[key]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get first element from child\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {HTMLELement}\r\n */\r\nconst getFirstElement = (element) =>\r\n  (element.firstElementChild || element).textContent.trim();\r\n\r\n/**\r\n * Scroll to top result-list\r\n * @param {HTMLElement} resultList\r\n * @param {HTMLElement} resultWrap\r\n */\r\nconst scrollResultsToTop = (resultList, resultWrap) => {\r\n  // if there is an overflow of ul element, after\r\n  // opening we always move ul to the top of the results\r\n  resultList.scrollTop = resultList.offsetTop - resultWrap.offsetHeight;\r\n};\r\n\r\n/**\r\n * Adding role, tabindex, aria and call handleMouse\r\n *\r\n * @param {HTMLElement} itemsLi\r\n */\r\nconst addAriaToAllLiElements = (itemsLi) => {\r\n  // add role to all li elements\r\n  for (let i = 0; i < itemsLi.length; i++) {\r\n    setAttributes(itemsLi[i], {\r\n      role: \"option\",\r\n      tabindex: \"-1\",\r\n      \"aria-selected\": \"false\",\r\n      \"aria-setsize\": itemsLi.length,\r\n      \"aria-posinset\": i,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Show btn to clear data\r\n *\r\n * @param {HTMLElement} clearButton - button to clear data\r\n * @param {Function} destroy - destroy function\r\n */\r\nconst showBtnToClearData = (clearButton = false, destroy) => {\r\n  if (!clearButton) return;\r\n\r\n  classList(clearButton, \"remove\", \"hidden\");\r\n  // add event to clear button\r\n  onEvent(clearButton, \"click\", destroy);\r\n};\r\n\r\n/**\r\n * ClassList add/remove/contains\r\n *\r\n * @param {HTMLElement} element - html element\r\n * @param {String} action - add/remove/contains\r\n * @param {String} className - class name\r\n */\r\nconst classList = (element, action, className) =>\r\n  element.classList[action](className);\r\n\r\n/**\r\n * Set aria-activedescendant\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {String} type\r\n */\r\nconst setAriaActivedescendant = (root, type) => {\r\n  setAttributes(root, {\r\n    \"aria-activedescendant\": type || \"\",\r\n  });\r\n};\r\n\r\n/**\r\n * Get height of ul without group class\r\n *\r\n * @param {String} outputUl\r\n * @param {String} classGroup\r\n * @returns {Number}\r\n */\r\nconst getClassGroupHeight = (outputUl, classGroup) => {\r\n  // get height of ul without group class\r\n  const allLiElements = document.querySelectorAll(\r\n    `#${outputUl} > li:not(.${classGroup})`\r\n  );\r\n  let height = 0;\r\n  [].slice.call(allLiElements).map((el) => (height += el.offsetHeight));\r\n\r\n  // return height\r\n  return height;\r\n};\r\n\r\n/**\r\n * Scroll into view when press up/down arrows\r\n *\r\n * @param {HTMLElement} target\r\n * @param {HTMLElement} outputUl\r\n * @param {String} classGroup\r\n * @param {HTMLElement} resultList\r\n */\r\nconst followActiveElement = (target, outputUl, classGroup, resultList) => {\r\n  const previusElement = resultList.previousSibling;\r\n\r\n  const previusElementHeight = previusElement ? previusElement.offsetHeight : 0;\r\n\r\n  if (target.getAttribute(\"aria-posinset\") == \"0\") {\r\n    resultList.scrollTop =\r\n      target.offsetTop - getClassGroupHeight(outputUl, classGroup);\r\n  }\r\n\r\n  if (target.offsetTop - previusElementHeight < resultList.scrollTop) {\r\n    resultList.scrollTop = target.offsetTop - previusElementHeight;\r\n  } else {\r\n    const offsetBottom =\r\n      target.offsetTop + target.offsetHeight - previusElementHeight;\r\n    const scrollBottom = resultList.scrollTop + resultList.offsetHeight;\r\n    if (offsetBottom > scrollBottom) {\r\n      resultList.scrollTop = offsetBottom - resultList.offsetHeight;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Create output-list and put after search input\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {HTMLElement} resultList - output-list ul\r\n * @param {String} outputUl - id name of output-list\r\n * @param {HTMLElement} resultWrap - wrapper ul element\r\n * @param {String} prefix - add prefix to all class auto\r\n */\r\nconst output = (root, resultList, outputUl, resultWrap, prefix) => {\r\n  // set attribute to results-list\r\n  setAttributes(resultList, {\r\n    id: outputUl,\r\n    tabIndex: \"0\",\r\n    role: \"listbox\",\r\n  });\r\n\r\n  // add class to wrap element\r\n  setAttributes(resultWrap, {\r\n    addClass: `${prefix}-results-wrapper`,\r\n  });\r\n\r\n  // insert the results into the wrap element\r\n  resultWrap.insertAdjacentElement(\"beforeend\", resultList);\r\n\r\n  // insert the wrap element after the search input\r\n  root.parentNode.insertBefore(resultWrap, root.nextSibling);\r\n};\r\n\r\n/**\r\n * Create element\r\n *\r\n * @param {String} type - type of element\r\n * @returns {HTMLDivElement}\r\n */\r\nconst createElement = (type) => document.createElement(type);\r\n\r\n/**\r\n * Get element\r\n *\r\n * @param {String} element\r\n * @returns {HTMLElement}\r\n */\r\nconst select = (element) => document.querySelector(element);\r\n\r\n/**\r\n * Event listeners\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} action\r\n * @param {Function} callback\r\n */\r\nconst onEvent = (element, action, callback) => {\r\n  element.addEventListener(action, callback);\r\n};\r\n\r\n/**\r\n * Remove event listeners\r\n */\r\nconst offEvent = (element, action, callback) => {\r\n  element.removeEventListener(action, callback);\r\n};\r\n\r\nexport {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n};\r\n","/**\r\n * Key codes\r\n */\r\nconst keyCodes = {\r\n  ESC: 27,\r\n  ENTER: 13,\r\n  UP: 38,\r\n  DOWN: 40,\r\n  TAB: 9,\r\n};\r\n\r\nexport default keyCodes;\r\n","import {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n} from \"./utils/function\";\r\n\r\nimport keyCodes from \"./utils/keyCodes\";\r\n\r\n/**\r\n * @class Autocomplete\r\n */\r\nexport default class Autocomplete {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {String} element\r\n   * @param {Object} object\r\n   */\r\n  constructor(\r\n    element,\r\n    {\r\n      delay = 500,\r\n      clearButton = true,\r\n      clearButtonOnInitial = false,\r\n      howManyCharacters = 1,\r\n      selectFirst = false,\r\n      insertToInput = false,\r\n      showAllValues = false,\r\n      cache = false,\r\n      disableCloseOnSelect = false,\r\n      preventScrollUp = false,\r\n      classGroup,\r\n      classPreventClosing,\r\n      classPrefix,\r\n      ariaLabelClear,\r\n      onSearch,\r\n      onResults = () => {},\r\n      onSubmit = () => {},\r\n      onOpened = () => {},\r\n      onReset = () => {},\r\n      onRender = () => {},\r\n      onClose = () => {},\r\n      noResults = () => {},\r\n      onSelectedItem = () => {},\r\n    }\r\n  ) {\r\n    this._id = element;\r\n    this._root = document.getElementById(element);\r\n    this._onSearch = isPromise(onSearch)\r\n      ? onSearch\r\n      : ({ currentValue, element }) =>\r\n          Promise.resolve(onSearch({ currentValue, element }));\r\n    this._onResults = onResults;\r\n    this._onRender = onRender;\r\n    this._onSubmit = onSubmit;\r\n    this._onSelected = onSelectedItem;\r\n    this._onOpened = onOpened;\r\n    this._onReset = onReset;\r\n    this._noResults = noResults;\r\n    this._onClose = onClose;\r\n\r\n    this._delay = delay;\r\n    this._characters = howManyCharacters;\r\n    this._clearButton = clearButton;\r\n    this._clearButtonOnInitial = clearButtonOnInitial;\r\n    this._selectFirst = selectFirst;\r\n    this._toInput = insertToInput;\r\n    this._showAll = showAllValues;\r\n    this._classGroup = classGroup;\r\n    this._prevClosing = classPreventClosing;\r\n    this._clearBtnAriLabel = ariaLabelClear\r\n      ? ariaLabelClear\r\n      : \"clear the search query\";\r\n    this._prefix = classPrefix ? `${classPrefix}-auto` : \"auto\";\r\n    this._disable = disableCloseOnSelect;\r\n    this._preventScrollUp = preventScrollUp;\r\n\r\n    // default config\r\n    this._cache = cache;\r\n    this._outputUl = `${this._prefix}-${this._id}-results`;\r\n    this._cacheData = `data-cache-auto-${this._id}`;\r\n    this._isLoading = `${this._prefix}-is-loading`;\r\n    this._isActive = `${this._prefix}-is-active`;\r\n    this._activeList = `${this._prefix}-selected`;\r\n    this._selectedOption = `${this._prefix}-selected-option`;\r\n    this._err = `${this._prefix}-error`;\r\n    this._regex = /[|\\\\{}()[\\]^$+*?.]/g;\r\n    this._timeout = null;\r\n\r\n    this._resultWrap = createElement(\"div\");\r\n    this._resultList = createElement(\"ul\");\r\n    this._clearBtn = createElement(\"button\");\r\n\r\n    this._initial();\r\n  }\r\n\r\n  /**\r\n   * Initial function\r\n   */\r\n  _initial = () => {\r\n    this._clearbutton();\r\n\r\n    output(\r\n      this._root,\r\n      this._resultList,\r\n      this._outputUl,\r\n      this._resultWrap,\r\n      this._prefix\r\n    );\r\n\r\n    // default aria\r\n    onEvent(this._root, \"input\", this._handleInput);\r\n\r\n    // show all values on click root input\r\n    this._showAll && onEvent(this._root, \"click\", this._handleInput);\r\n\r\n    // calback functions\r\n    this._onRender({\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // show clear button if\r\n    if (this._clearButtonOnInitial) {\r\n      showBtnToClearData(this._clearBtn, this.destroy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Actions on input\r\n   *\r\n   * @param {String} type - set attribute depending on type\r\n   * @param {String} target\r\n   */\r\n  _cacheAct = (type, target) => {\r\n    if (!this._cache) return;\r\n\r\n    if (type === \"update\") {\r\n      this._root.setAttribute(this._cacheData, target.value);\r\n    } else if (type === \"remove\") {\r\n      this._root.removeAttribute(this._cacheData);\r\n    } else {\r\n      this._root.value = this._root.getAttribute(this._cacheData);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle input\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleInput = ({ target, type }) => {\r\n    if (\r\n      this._root.getAttribute(\"aria-expanded\") === \"true\" &&\r\n      type === \"click\"\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // replace all special characters\r\n    const regex = target.value.replace(this._regex, \"\\\\$&\");\r\n\r\n    // update data attribute cache\r\n    this._cacheAct(\"update\", target);\r\n\r\n    const delay = this._showAll ? 0 : this._delay;\r\n    // clear timeout\r\n    clearTimeout(this._timeout);\r\n    this._timeout = setTimeout(() => {\r\n      this._searchItem(regex.trim());\r\n    }, delay);\r\n  };\r\n\r\n  /**\r\n   * Default aria\r\n   */\r\n  _reset = () => {\r\n    // set attributes to root - input\r\n    setAttributes(this._root, {\r\n      \"aria-owns\": `${this._id}-list`,\r\n      \"aria-expanded\": \"false\",\r\n      \"aria-autocomplete\": \"list\",\r\n      \"aria-activedescendant\": \"\",\r\n      role: \"combobox\",\r\n      removeClass: \"auto-expanded\",\r\n    });\r\n\r\n    // remove class isActive\r\n    classList(this._resultWrap, \"remove\", this._isActive);\r\n\r\n    // set default aria-selected, remove id and remove class 'auto-selected'\r\n    this._removeAria(select(`.${this._activeList}`));\r\n\r\n    // remove result when lengh = 0 and insertToInput is false\r\n    // https://github.com/tomickigrzegorz/autocomplete/issues/136\r\n    if ((this._matches?.length == 0 && !this._toInput) || this._showAll) {\r\n      this._resultList.textContent = \"\";\r\n    }\r\n\r\n    // set index\r\n    this._index = this._selectFirst ? 0 : -1;\r\n\r\n    // callback function\r\n    this._onClose();\r\n  };\r\n\r\n  /**\r\n   * The async function gets the text from the search\r\n   * and returns the matching array\r\n   *\r\n   * @param {String} value\r\n   */\r\n  _searchItem = (value) => {\r\n    this._value = value;\r\n\r\n    // if searching show loading icon\r\n    this._onLoading(true);\r\n\r\n    // hide button clear\r\n    showBtnToClearData(this._clearBtn, this.destroy);\r\n\r\n    // if there is no value and clearButton is true\r\n    if (value.length == 0 && this._clearButton) {\r\n      classList(this._clearBtn, \"add\", \"hidden\");\r\n    }\r\n\r\n    // if declare characters more then value.len and showAll is false\r\n    // remove class isActive\r\n    if (this._characters > value.length && !this._showAll) {\r\n      this._onLoading();\r\n      return;\r\n    }\r\n\r\n    // callblack function onSearch\r\n    this._onSearch({ currentValue: value, element: this._root })\r\n      .then((result) => {\r\n        const rootValueLength = this._root.value.length;\r\n        const resultLength = result.length;\r\n        // set no result\r\n        this._matches = Array.isArray(result)\r\n          ? result\r\n          : JSON.parse(JSON.stringify(result));\r\n\r\n        this._onLoading();\r\n        this._error();\r\n\r\n        // if use destroy() method\r\n        if (resultLength == 0 && rootValueLength == 0) {\r\n          classList(this._clearBtn, \"add\", \"hidden\");\r\n        }\r\n\r\n        if (resultLength == 0 && rootValueLength) {\r\n          classList(this._root, \"remove\", \"auto-expanded\");\r\n          this._reset();\r\n          this._noResults({\r\n            element: this._root,\r\n            currentValue: value,\r\n            template: this._results,\r\n          });\r\n          this._events();\r\n        } else if (resultLength > 0 || isObject(result)) {\r\n          this._index = this._selectFirst ? 0 : -1;\r\n          this._results();\r\n          this._events();\r\n        }\r\n      })\r\n      .catch(() => {\r\n        this._onLoading();\r\n        this._reset();\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Set or remove loading class\r\n   *\r\n   * @param {Boolean} type\r\n   */\r\n  _onLoading = (type) =>\r\n    this._root.parentNode.classList[type ? \"add\" : \"remove\"](this._isLoading);\r\n\r\n  /**\r\n   * Set error class to the root element\r\n   */\r\n  _error = () => classList(this._root, \"remove\", this._err);\r\n\r\n  /**\r\n   * Events\r\n   */\r\n  _events = () => {\r\n    // handle click on keydown [up, down, enter, tab, esc]\r\n    onEvent(this._root, \"keydown\", this._handleKeys);\r\n\r\n    onEvent(this._root, \"click\", this._handleShowItems);\r\n\r\n    // close expanded items\r\n    onEvent(document, \"click\", this._handleDocClick);\r\n\r\n    // temporarily disabled mouseleave\r\n    [\"mousemove\", \"click\"].map((eventType) => {\r\n      onEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Results\r\n   *\r\n   * @param {HTMLElement|String} template - html or string returned from the function,\r\n   * look at the example - https://github.com/tomickigrzegorz/autocomplete/blob/master/docs/js/examples/no-results.js#L30\r\n   */\r\n  _results = (template) => {\r\n    // set attribute to root\r\n    setAttributes(this._root, {\r\n      \"aria-expanded\": \"true\",\r\n      addClass: `${this._prefix}-expanded`,\r\n    });\r\n\r\n    // clear result list\r\n    this._resultList.textContent = \"\";\r\n\r\n    // add all found records to otput ul\r\n    const dataResults =\r\n      this._matches.length === 0\r\n        ? this._onResults({\r\n            currentValue: this._value,\r\n            matches: 0,\r\n            template,\r\n          })\r\n        : this._onResults({\r\n            currentValue: this._value,\r\n            matches: this._matches,\r\n            classGroup: this._classGroup,\r\n          });\r\n\r\n    // add data to ul\r\n    this._resultList.insertAdjacentHTML(\"afterbegin\", dataResults);\r\n\r\n    // add class isActive\r\n    classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n    const checkIfClassGroupExist = this._classGroup\r\n      ? `:not(.${this._classGroup})`\r\n      : \"\";\r\n\r\n    this._itemsLi = document.querySelectorAll(\r\n      `#${this._outputUl} > li${checkIfClassGroupExist}`\r\n    );\r\n\r\n    // adding role, tabindex and aria\r\n    addAriaToAllLiElements(this._itemsLi);\r\n\r\n    // action on open results\r\n    this._onOpened({\r\n      type: \"results\",\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // select first element\r\n    this._selectFirstElement();\r\n\r\n    // move the view item to the first item\r\n    // this.resultList.scrollTop = 0;\r\n    if (this._preventScrollUp) return;\r\n    scrollResultsToTop(this._resultList, this._resultWrap);\r\n  };\r\n\r\n  /**\r\n   * Hangle click on document\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleDocClick = ({ target }) => {\r\n    let disableClose = null;\r\n\r\n    // if 'target' is a ul and 'disableCloseOnSelect'\r\n    // is a 'true' set 'disableClose' on true\r\n    if (\r\n      (target.closest(\"ul\") && this._disable) ||\r\n      // when class classDisableClose\r\n      // then do not not close results\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      disableClose = true;\r\n    }\r\n\r\n    if (target.id !== this._id && !disableClose) {\r\n      this._reset();\r\n      return;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select first element\r\n   */\r\n  _selectFirstElement = () => {\r\n    this._removeAria(select(`.${this._activeList}`));\r\n\r\n    if (!this._selectFirst) {\r\n      return;\r\n    }\r\n\r\n    const { firstElementChild } = this._resultList;\r\n\r\n    const classSelectFirst =\r\n      this._classGroup && this._matches.length > 0 && this._selectFirst\r\n        ? firstElementChild.nextElementSibling\r\n        : firstElementChild;\r\n\r\n    // calback function onSelect when first element is true\r\n    this._onSelected({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n    });\r\n\r\n    // set attribute to first element\r\n    setAttributes(classSelectFirst, {\r\n      id: `${this._selectedOption}-0`,\r\n      addClass: this._activeList,\r\n      \"aria-selected\": \"true\",\r\n    });\r\n\r\n    // set aria active descendant\r\n    setAriaActivedescendant(this._root, `${this._selectedOption}-0`);\r\n  };\r\n\r\n  /**\r\n   * show items when items.length > 0 and is not empty\r\n   */\r\n  _handleShowItems = () => {\r\n    // if resultWrap is not active and resultList is not empty\r\n    if (\r\n      this._resultList.textContent.length > 0 &&\r\n      !classList(this._resultWrap, \"contains\", this._isActive)\r\n    ) {\r\n      // set attribute to root\r\n      setAttributes(this._root, {\r\n        \"aria-expanded\": \"true\",\r\n        addClass: `${this._prefix}-expanded`,\r\n      });\r\n\r\n      // add isActive class to resultWrap\r\n      classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n      // move the view item to the first item\r\n      // this.resultList.scrollTop = 0;\r\n      if (!this._preventScrollUp) {\r\n        scrollResultsToTop(this._resultList, this._resultWrap);\r\n      }\r\n\r\n      // select first element\r\n      this._selectFirstElement();\r\n\r\n      // callback function\r\n      this._onOpened({\r\n        type: \"showItems\",\r\n        element: this._root,\r\n        results: this._resultList,\r\n      });\r\n\r\n      if (!this._cache) return;\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adding text from the list when li is clicking\r\n   * or adding aria-selected to li elements\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleMouse = (event) => {\r\n    event.preventDefault();\r\n\r\n    const { target, type } = event;\r\n    const targetClosest = target.closest(\"li\");\r\n    const targetClosestRole = targetClosest?.hasAttribute(\"role\");\r\n    const activeClass = this._activeList;\r\n    const activeClassElement = select(`.${activeClass}`);\r\n\r\n    if (\r\n      !targetClosest ||\r\n      !targetClosestRole ||\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (type === \"click\") {\r\n      // click on li get element\r\n      // get text from clicked li\r\n      this._getTextFromLi(targetClosest);\r\n    }\r\n\r\n    if (\r\n      type === \"mousemove\" &&\r\n      !classList(targetClosest, \"contains\", activeClass)\r\n    ) {\r\n      this._removeAria(activeClassElement);\r\n\r\n      // add aria to li\r\n      this._setAria(targetClosest);\r\n      this._index = this._indexLiSelected(targetClosest);\r\n\r\n      this._onSelected({\r\n        index: this._index,\r\n        element: this._root,\r\n        object: this._matches[this._index],\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get text from li on enter or click\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _getTextFromLi = (element) => {\r\n    if (!element || this._matches.length === 0) {\r\n      // set default settings\r\n      !this._disable && this._reset();\r\n\r\n      return;\r\n    }\r\n\r\n    // show clearBtn when select element\r\n    this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n\r\n    // get first element from li and set it to root\r\n    this._root.value = getFirstElement(element);\r\n\r\n    // onSubmit passing text to function\r\n    this._onSubmit({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n      results: this._resultList,\r\n    });\r\n\r\n    // set default settings\r\n    if (!this._disable) {\r\n      this._removeAria(element);\r\n      this._reset();\r\n    }\r\n\r\n    // remove cache\r\n    this._cacheAct(\"remove\");\r\n  };\r\n\r\n  /**\r\n   * Return which li element was selected\r\n   * by hovering the mouse over\r\n   *\r\n   * @param {HTMLElement} target\r\n   * @returns {Number}\r\n   */\r\n  _indexLiSelected = (target) =>\r\n    // get index of li element\r\n    Array.prototype.indexOf.call(this._itemsLi, target);\r\n\r\n  /**\r\n   * Navigating the elements li and enter\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleKeys = (event) => {\r\n    const { keyCode } = event;\r\n\r\n    const resultList = classList(this._resultWrap, \"contains\", this._isActive);\r\n\r\n    const matchesLength = this._matches.length + 1;\r\n    this._selectedLi = select(`.${this._activeList}`);\r\n\r\n    // switch between keys\r\n    switch (keyCode) {\r\n      case keyCodes.UP:\r\n      case keyCodes.DOWN:\r\n        // Wrong cursor position in the input field #62\r\n        // Prevents the cursor from moving to the beginning\r\n        // of input as the cursor hovers over the results.\r\n        event.preventDefault();\r\n\r\n        if ((matchesLength <= 1 && this._selectFirst) || !resultList) {\r\n          return;\r\n        }\r\n\r\n        // if keyCode is up\r\n        if (keyCode === keyCodes.UP) {\r\n          if (this._index < 0) {\r\n            this._index = matchesLength - 1;\r\n          }\r\n          this._index -= 1;\r\n        } else {\r\n          this._index += 1;\r\n          if (this._index >= matchesLength) {\r\n            this._index = 0;\r\n          }\r\n        }\r\n\r\n        // remove aria-selected\r\n        this._removeAria(this._selectedLi);\r\n\r\n        if (this._index >= 0 && this._index < matchesLength - 1) {\r\n          const selectedElement = this._itemsLi[this._index];\r\n\r\n          if (this._toInput && resultList) {\r\n            this._root.value = getFirstElement(selectedElement);\r\n          }\r\n\r\n          // callback function\r\n          this._onSelected({\r\n            index: this._index,\r\n            element: this._root,\r\n            object: this._matches[this._index],\r\n          });\r\n\r\n          // set aria-selected\r\n          this._setAria(selectedElement);\r\n        } else {\r\n          // catch action\r\n          this._cacheAct();\r\n          setAriaActivedescendant(this._root);\r\n\r\n          this._onSelected({\r\n            index: null,\r\n            element: this._root,\r\n            object: null,\r\n          });\r\n        }\r\n\r\n        break;\r\n      // keycode enter\r\n      case keyCodes.ENTER:\r\n        // https:github.com/tomickigrzegorz/autocomplete/issues/145\r\n        event.preventDefault();\r\n\r\n        this._getTextFromLi(this._selectedLi);\r\n        break;\r\n\r\n      // keycode escape and keycode tab\r\n      case keyCodes.TAB:\r\n      case keyCodes.ESC:\r\n        event.stopPropagation();\r\n        this._reset();\r\n\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria label on item li\r\n   *\r\n   * @param {HTMLElement} target\r\n   */\r\n  _setAria = (target) => {\r\n    const selectedOption = `${this._selectedOption}-${this._indexLiSelected(\r\n      target\r\n    )}`;\r\n\r\n    // set aria to li\r\n    setAttributes(target, {\r\n      id: selectedOption,\r\n      \"aria-selected\": \"true\",\r\n      addClass: this._activeList,\r\n    });\r\n\r\n    setAriaActivedescendant(this._root, selectedOption);\r\n\r\n    // scrollIntoView when press up/down arrows\r\n    followActiveElement(\r\n      target,\r\n      this._outputUl,\r\n      this._classGroup,\r\n      this._resultList\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Remove aria label from item li\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _removeAria = (element) => {\r\n    if (!element) return;\r\n\r\n    // remove aria from li\r\n    setAttributes(element, {\r\n      id: \"\",\r\n      removeClass: this._activeList,\r\n      \"aria-selected\": \"false\",\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Create clear button and\r\n   * removing text from the input field\r\n   */\r\n  _clearbutton = () => {\r\n    // stop when clear button is disabled\r\n    if (!this._clearButton) return;\r\n\r\n    // add aria to clear button\r\n    setAttributes(this._clearBtn, {\r\n      class: `${this._prefix}-clear hidden`,\r\n      type: \"button\",\r\n      title: this._clearBtnAriLabel,\r\n      \"aria-label\": this._clearBtnAriLabel,\r\n    });\r\n\r\n    // insert clear button after input - root\r\n    this._root.insertAdjacentElement(\"afterend\", this._clearBtn);\r\n  };\r\n\r\n  /**\r\n   * Rerender rows without remove root input and close elements\r\n   */\r\n  rerender = (inputValue) => {\r\n    const text = inputValue?.trim() ? inputValue.trim() : this._root.value;\r\n    if (inputValue?.trim()) {\r\n      this._root.value = inputValue.trim();\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n    const regexText = text.replace(this._regex, \"\\\\$&\");\r\n    this._searchItem(regexText.trim());\r\n  };\r\n\r\n  /**\r\n   * Clicking on the clear button\r\n   * publick destroy method\r\n   */\r\n  destroy = () => {\r\n    // if clear button is true then add class hidden\r\n    this._clearButton && classList(this._clearBtn, \"add\", \"hidden\");\r\n    // clear value searchId\r\n    this._root.value = \"\";\r\n    // set focus\r\n    this._root.focus();\r\n    // remove li from ul\r\n    this._resultList.textContent = \"\";\r\n    // set default aria\r\n    this._reset();\r\n    // remove error if exist\r\n    this._error();\r\n\r\n    // callback function\r\n    this._onReset(this._root);\r\n\r\n    // remove listener\r\n    offEvent(this._root, \"keydown\", this._handleKeys);\r\n    offEvent(this._root, \"click\", this._handleShowItems);\r\n    // remove listener on click on document\r\n    offEvent(document, \"click\", this._handleDocClick);\r\n  };\r\n}\r\n"],"names":["isObject","value","constructor","Object","isPromise","Boolean","then","setAttributes","el","object","key","classList","setAttribute","getFirstElement","element","firstElementChild","textContent","trim","scrollResultsToTop","resultList","resultWrap","scrollTop","offsetTop","offsetHeight","addAriaToAllLiElements","itemsLi","i","length","role","tabindex","showBtnToClearData","clearButton","destroy","onEvent","action","className","setAriaActivedescendant","root","type","getClassGroupHeight","outputUl","classGroup","allLiElements","document","querySelectorAll","height","slice","call","map","followActiveElement","target","previusElement","previousSibling","previusElementHeight","getAttribute","offsetBottom","scrollBottom","output","prefix","id","tabIndex","addClass","insertAdjacentElement","parentNode","insertBefore","nextSibling","createElement","select","querySelector","callback","addEventListener","offEvent","removeEventListener","keyCodes","ESC","ENTER","UP","DOWN","TAB","Autocomplete","_ref","delay","clearButtonOnInitial","howManyCharacters","selectFirst","insertToInput","showAllValues","cache","disableCloseOnSelect","preventScrollUp","classPreventClosing","classPrefix","ariaLabelClear","onSearch","onResults","onSubmit","onOpened","onReset","onRender","onClose","noResults","onSelectedItem","_initial","_clearbutton","_root","_resultList","_outputUl","_resultWrap","_prefix","_handleInput","_showAll","_onRender","results","_clearButtonOnInitial","_clearBtn","_cacheAct","_cache","_cacheData","removeAttribute","_ref2","regex","replace","_regex","_delay","clearTimeout","_timeout","setTimeout","_searchItem","_reset","_id","removeClass","_isActive","_removeAria","_activeList","_matches","_toInput","_index","_selectFirst","_onClose","_value","_onLoading","_clearButton","_characters","_onSearch","currentValue","result","rootValueLength","resultLength","Array","isArray","JSON","parse","stringify","_error","_noResults","template","_results","_events","catch","_isLoading","_err","_handleKeys","_handleShowItems","_handleDocClick","eventType","_handleMouse","dataResults","_onResults","matches","_classGroup","insertAdjacentHTML","checkIfClassGroupExist","_itemsLi","_onOpened","_selectFirstElement","_preventScrollUp","_ref3","disableClose","closest","_disable","_prevClosing","classSelectFirst","nextElementSibling","_onSelected","index","_selectedOption","event","preventDefault","targetClosest","targetClosestRole","hasAttribute","activeClass","activeClassElement","_getTextFromLi","_setAria","_indexLiSelected","_onSubmit","prototype","indexOf","keyCode","matchesLength","_selectedLi","selectedElement","stopPropagation","selectedOption","class","title","_clearBtnAriLabel","rerender","inputValue","text","regexText","focus","_onReset","getElementById","_ref4","Promise","resolve"],"mappings":"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"}